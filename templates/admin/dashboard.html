{% extends 'base.html' %}

{% block title %}Panel de Administraci칩n - Estudify{% endblock %}

{% block content %}
<h2 style="margin-bottom: 2rem; color: #2c3e50;">游늵 Panel de Administraci칩n</h2>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-value">{{ total_estudiantes }}</div>
        <div class="stat-label">Estudiantes Activos</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{ total_docentes }}</div>
        <div class="stat-label">Docentes Activos</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{ total_cursos }}</div>
        <div class="stat-label">Cursos Activos</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{ total_materias }}</div>
        <div class="stat-label">Materias Activas</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{ promedio_general }}</div>
        <div class="stat-label">Promedio General</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{ porcentaje_asistencia }}%</div>
        <div class="stat-label">Asistencia Mensual</div>
    </div>
</div>

<div class="card">
    <h3 class="card-title">游꿉 Cursos con M치s Estudiantes</h3>
    <table>
        <thead>
            <tr>
                <th>Curso</th>
                <th>A침o Escolar</th>
                <th>Estudiantes</th>
                <th>Estado</th>
            </tr>
        </thead>
        <tbody>
            {% for curso in cursos_populares %}
            <tr>
                <td><strong>{{ curso.nombre }}</strong></td>
                <td>{{ curso.a침o_escolar }}</td>
                <td>{{ curso.num_estudiantes }}</td>
                <td>
                    {% if curso.activo %}
                    <span class="badge badge-success">Activo</span>
                    {% else %}
                    <span class="badge badge-danger">Inactivo</span>
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4" style="text-align: center; color: #7f8c8d;">No hay cursos registrados</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="card">
    <h3 class="card-title">游논 Estudiantes Recientes</h3>
    <table>
        <thead>
            <tr>
                <th>Usuario</th>
                <th>Nombre Completo</th>
                <th>Email</th>
                <th>Fecha de Registro</th>
                <th>Estado</th>
            </tr>
        </thead>
        <tbody>
            {% for estudiante in estudiantes_recientes %}
            <tr>
                <td><strong>{{ estudiante.username }}</strong></td>
                <td>{{ estudiante.get_full_name|default:"-" }}</td>
                <td>{{ estudiante.email|default:"-" }}</td>
                <td>{{ estudiante.date_joined|date:"d/m/Y" }}</td>
                <td>
                    {% if estudiante.is_active %}
                    <span class="badge badge-success">Activo</span>
                    {% else %}
                    <span class="badge badge-danger">Inactivo</span>
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" style="text-align: center; color: #7f8c8d;">No hay estudiantes registrados</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
