{% extends 'base.html' %}
{% block title %}{% if edit_mode %}Editar{% else %}Crear{% endif %} Usuario{% endblock %}
{% block content %}
<h2>{% if edit_mode %}Editar{% else %}Crear{% endif %} Usuario</h2>
<div class="card">
    <form method="post">
        {% csrf_token %}
        <div class="form-group" style="margin-bottom: 1rem;">
            <label>Username:</label>
            <input type="text" name="username" value="{{ usuario.username|default:'' }}" required style="width: 100%; padding: 0.5rem;">
        </div>
        <div class="form-group" style="margin-bottom: 1rem;">
            <label>Email:</label>
            <input type="email" name="email" value="{{ usuario.email|default:'' }}" style="width: 100%; padding: 0.5rem;">
        </div>
        <div class="form-group" style="margin-bottom: 1rem;">
            <label>Nombre:</label>
            <input type="text" name="first_name" value="{{ usuario.first_name|default:'' }}" style="width: 100%; padding: 0.5rem;">
        </div>
        <div class="form-group" style="margin-bottom: 1rem;">
            <label>Apellido:</label>
            <input type="text" name="last_name" value="{{ usuario.last_name|default:'' }}" style="width: 100%; padding: 0.5rem;">
        </div>
        <div class="form-group" style="margin-bottom: 1rem;">
            <label>Contrase√±a{% if edit_mode %} (dejar en blanco para no cambiar){% endif %}:</label>
            <input type="password" name="password" {% if not edit_mode %}required{% endif %} style="width: 100%; padding: 0.5rem;">
        </div>
        <div class="form-group" style="margin-bottom: 1rem;">
            <label>Role:</label>
            <select name="role" required style="width: 100%; padding: 0.5rem;">
                {% for value, label in roles %}
                <option value="{{ value }}" {% if usuario.role == value %}selected{% endif %}>{{ label }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group" style="margin-bottom: 1rem;">
            <label><input type="checkbox" name="is_active" {% if edit_mode %}{% if usuario.is_active %}checked{% endif %}{% else %}checked{% endif %}> Activo</label>
        </div>
        <button type="submit" class="btn btn-success">Guardar</button>
        <a href="{% url 'admin_usuarios_lista' %}" class="btn btn-danger">Cancelar</a>
    </form>
</div>
{% endblock %}