{% extends 'base.html' %}

{% block title %}Dashboard Docente - Estudify{% endblock %}

{% block content %}
<h2 style="margin-bottom: 2rem; color: #2c3e50;">ğŸ“ Panel del Docente</h2>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-value">{{ materias.count }}</div>
        <div class="stat-label">Materias Asignadas</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{ total_estudiantes }}</div>
        <div class="stat-label">Estudiantes Totales</div>
    </div>
</div>

<div class="card">
    <h3 class="card-title">ğŸ“š Mis Materias</h3>
    <table>
        <thead>
            <tr>
                <th>Materia</th>
                <th>CÃ³digo</th>
                <th>Curso</th>
                <th>CrÃ©ditos</th>
                <th>Estado</th>
            </tr>
        </thead>
        <tbody>
            {% for materia in materias %}
            <tr>
                <td><strong>{{ materia.nombre }}</strong></td>
                <td>{{ materia.codigo }}</td>
                <td>{{ materia.curso.nombre }}</td>
                <td>{{ materia.creditos }}</td>
                <td>
                    {% if materia.activa %}
                    <span class="badge badge-success">Activa</span>
                    {% else %}
                    <span class="badge badge-danger">Inactiva</span>
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" style="text-align: center; color: #7f8c8d;">No tienes materias asignadas</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="card">
    <h3 class="card-title">ğŸ“ Calificaciones Recientes</h3>
    <table>
        <thead>
            <tr>
                <th>Estudiante</th>
                <th>Materia</th>
                <th>Periodo</th>
                <th>Nota</th>
                <th>Estado</th>
                <th>Fecha</th>
            </tr>
        </thead>
        <tbody>
            {% for cal in calificaciones_recientes %}
            <tr>
                <td><strong>{{ cal.estudiante.get_full_name|default:cal.estudiante.username }}</strong></td>
                <td>{{ cal.materia.nombre }}</td>
                <td>{{ cal.get_periodo_display }}</td>
                <td><strong>{{ cal.nota }}</strong></td>
                <td>
                    {% if cal.aprobado %}
                    <span class="badge badge-success">Aprobado</span>
                    {% else %}
                    <span class="badge badge-danger">Reprobado</span>
                    {% endif %}
                </td>
                <td>{{ cal.fecha_registro|date:"d/m/Y" }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" style="text-align: center; color: #7f8c8d;">No hay calificaciones registradas</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="card">
    <h3 class="card-title">âš™ï¸ Acciones RÃ¡pidas</h3>
    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
        <a href="/admin/core/calificacion/add/" class="btn btn-primary">â• Registrar CalificaciÃ³n</a>
        <a href="/admin/core/asistencia/add/" class="btn btn-primary">ğŸ“… Registrar Asistencia</a>
        <a href="/admin/core/calificacion/" class="btn btn-success">ğŸ“Š Ver Todas las Calificaciones</a>
        <a href="/admin/core/asistencia/" class="btn btn-success">ğŸ“‹ Ver Todas las Asistencias</a>
    </div>
</div>
{% endblock %}
