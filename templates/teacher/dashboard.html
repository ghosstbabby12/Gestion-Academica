{% extends 'base.html' %}
{% block title %}Panel de Docente{% endblock %}
{% block content %}
<h2>ğŸ“ Panel del Docente</h2>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-value">{{ materias.count }}</div>
        <div class="stat-label">Materias Asignadas</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{ total_estudiantes }}</div>
        <div class="stat-label">Estudiantes Totales</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{ total_calificaciones }}</div>
        <div class="stat-label">Calificaciones Registradas</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{ promedio_general }}</div>
        <div class="stat-label">Promedio General</div>
    </div>
</div>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
    <div class="card" style="text-align: center;">
        <h3 style="margin-bottom: 1rem;">ğŸ‘¥ Estudiantes</h3>
        <p style="color: #718096; margin-bottom: 1.5rem;">Inscribe estudiantes en tus materias</p>
        <a href="{% url 'teacher_estudiantes_materia' %}" class="btn btn-primary" style="margin-right: 0.5rem;">Ver Estudiantes</a>
        <a href="{% url 'teacher_inscribir_estudiante' %}" class="btn btn-success">â• Inscribir</a>
    </div>

    <div class="card" style="text-align: center;">
        <h3 style="margin-bottom: 1rem;">ğŸ“ Calificaciones</h3>
        <p style="color: #718096; margin-bottom: 1.5rem;">Gestiona las notas de tus estudiantes</p>
        <a href="{% url 'teacher_calificaciones_lista' %}" class="btn btn-primary" style="margin-right: 0.5rem;">Ver Calificaciones</a>
        <a href="{% url 'teacher_calificacion_crear' %}" class="btn btn-success">â• Registrar Nota</a>
    </div>

    <div class="card" style="text-align: center;">
        <h3 style="margin-bottom: 1rem;">ğŸ“… Asistencia</h3>
        <p style="color: #718096; margin-bottom: 1.5rem;">Registra la asistencia de tus clases</p>
        <a href="{% url 'teacher_asistencias_lista' %}" class="btn btn-primary" style="margin-right: 0.5rem;">Ver Asistencias</a>
        <a href="{% url 'teacher_asistencia_crear' %}" class="btn btn-success">â• Tomar Asistencia</a>
    </div>

    <div class="card" style="text-align: center;">
        <h3 style="margin-bottom: 1rem;">ğŸ“Š EstadÃ­sticas</h3>
        <p style="color: #718096; margin-bottom: 1.5rem;">Analiza el rendimiento acadÃ©mico</p>
        <a href="{% url 'teacher_estadisticas' %}" class="btn btn-info">Ver EstadÃ­sticas</a>
    </div>
</div>

<div class="card">
    <h3>ğŸ“š Mis Materias</h3>
    <table>
        <thead>
            <tr>
                <th>Materia</th>
                <th>CÃ³digo</th>
                <th>Curso</th>
                <th>CrÃ©ditos</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for materia in materias %}
            <tr>
                <td><strong>{{ materia.nombre }}</strong></td>
                <td>{{ materia.codigo }}</td>
                <td>{{ materia.curso.nombre }}</td>
                <td>{{ materia.creditos }}</td>
                <td>
                    <a href="{% url 'teacher_generar_reporte' %}?materia={{ materia.id }}" class="btn btn-success" style="padding: 0.375rem 0.75rem; font-size: 0.85rem;">ğŸ“¥ Exportar</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" style="text-align: center; color: #7f8c8d;">No tienes materias asignadas</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="card">
    <h3>ğŸ“ Calificaciones Recientes</h3>
    <table>
        <thead>
            <tr>
                <th>Estudiante</th>
                <th>Materia</th>
                <th>Periodo</th>
                <th>Nota</th>
                <th>Fecha</th>
            </tr>
        </thead>
        <tbody>
            {% for cal in calificaciones_recientes %}
            <tr>
                <td><strong>{{ cal.estudiante.get_full_name|default:cal.estudiante.username }}</strong></td>
                <td>{{ cal.materia.nombre }}</td>
                <td>{{ cal.get_periodo_display }}</td>
                <td>
                    {% if cal.aprobado %}
                    <span class="badge badge-success">{{ cal.nota }}</span>
                    {% else %}
                    <span class="badge badge-danger">{{ cal.nota }}</span>
                    {% endif %}
                </td>
                <td>{{ cal.fecha_registro|date:"d/m/Y" }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" style="text-align: center; color: #7f8c8d;">No hay calificaciones registradas</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}